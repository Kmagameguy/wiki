
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../pop_os/working_with_firefox_profiles/">
      
      
        <link rel="next" href="../latest_apache2_on_raspbian/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.5">
    
    
      
        <title>Headless Raspberry Pi from Scratch - KevBot's Wiki</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.558e4712.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Open Sans";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#headless-raspberry-pi-from-scratch" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="KevBot&#39;s Wiki" class="md-header__button md-logo" aria-label="KevBot's Wiki" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            KevBot's Wiki
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Headless Raspberry Pi from Scratch
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/kmagameguy/wiki" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    kmagameguy/wiki
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="KevBot&#39;s Wiki" class="md-nav__button md-logo" aria-label="KevBot's Wiki" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    KevBot's Wiki
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/kmagameguy/wiki" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    kmagameguy/wiki
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        KevBot's Wiki
      </a>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" tabindex="0" aria-expanded="false">
          Android
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Android" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Android
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../android/android_apps_without_smartphone/" class="md-nav__link">
        Run Android Apps Without a Smartphone
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" tabindex="0" aria-expanded="false">
          Gallium os
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Gallium os" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Gallium os
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gallium_os/fixing_the_audio_system/" class="md-nav__link">
        Fixing the Gallium OS Audio System
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" tabindex="0" aria-expanded="false">
          General guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="General guides" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          General guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../general_guides/examining_disk_usage_linux/" class="md-nav__link">
        Examining Disk Usage on Linux Systems
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../general_guides/getting_good_prints_from_an_ender3v2/" class="md-nav__link">
        Ultimaker Cura Print Settings for Stock Ender3 v2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../general_guides/grafana_server_on_focal_fossa/" class="md-nav__link">
        Running Grafana Server on Ubuntu Focal Fossa (20.04 LTS)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../general_guides/mqtt/" class="md-nav__link">
        MQTT
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../general_guides/native_firefox_installation_on_linux/" class="md-nav__link">
        How to Install Firefox Directly from Mozilla Builds on Linux
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../general_guides/restic_guide/" class="md-nav__link">
        Restic Backup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../general_guides/upgrading_postgres/" class="md-nav__link">
        How to Upgrade a Postgres DB
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../general_guides/using_docker_compose/" class="md-nav__link">
        How to Use Docker-Compose
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../general_guides/verifying_file_hashes/" class="md-nav__link">
        Verifying File Hashes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5" tabindex="0" aria-expanded="false">
          Pop os
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Pop os" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Pop os
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../pop_os/controlling_amdgpu/" class="md-nav__link">
        Controlling AMDGPU
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../pop_os/hp_printer_and_scanner_software/" class="md-nav__link">
        How To Install HP Printer/Scanner Drivers & Software
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../pop_os/logitech_g600_configuration/" class="md-nav__link">
        Configuring a Logitech G600 Mouse
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../pop_os/making_wifi_work/" class="md-nav__link">
        Making WiFi Work
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../pop_os/pipewire/" class="md-nav__link">
        Setting Up PipeWire with EasyEffects
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../pop_os/snaps_with_symlinks/" class="md-nav__link">
        Make Snaps Play Nicely With Home Directory Symlinks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../pop_os/working_with_firefox_profiles/" class="md-nav__link">
        Firefox Profiles
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_6" type="checkbox" id="__nav_6" checked>
      
      
      
        <label class="md-nav__link" for="__nav_6" tabindex="0" aria-expanded="true">
          Raspbian os
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Raspbian os" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Raspbian os
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Headless Raspberry Pi from Scratch
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Headless Raspberry Pi from Scratch
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pre-requisites" class="md-nav__link">
    Pre-requisites:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flashing-the-os" class="md-nav__link">
    Flashing the OS
  </a>
  
    <nav class="md-nav" aria-label="Flashing the OS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-settings" class="md-nav__link">
    Basic Settings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hostname" class="md-nav__link">
    Hostname
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh" class="md-nav__link">
    SSH
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-configure-wifi" class="md-nav__link">
    OPTIONAL: Configure WiFi
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#locale" class="md-nav__link">
    Locale
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#persistent-settings" class="md-nav__link">
    Persistent settings
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#first-boot" class="md-nav__link">
    First Boot
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-the-full-sd-card" class="md-nav__link">
    Use the Full SD Card
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optional-raspberry-pi-4-only-use-64bit-kernel" class="md-nav__link">
    OPTIONAL - RASPBERRY PI 4 ONLY: Use 64bit Kernel
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assign-a-static-ip-address" class="md-nav__link">
    Assign a Static IP Address
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-user-credentials" class="md-nav__link">
    Configuring User Credentials
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-ssh" class="md-nav__link">
    Configuring SSH
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../latest_apache2_on_raspbian/" class="md-nav__link">
        Install Latest Apache2 On Raspbian
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
        <label class="md-nav__link" for="__nav_7" tabindex="0" aria-expanded="false">
          Recipes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Recipes" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Recipes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../recipes/hershey_kiss_peanut_butter_cookies/" class="md-nav__link">
        Hershey's Kiss Peanut Butter Cookies
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../recipes/jennifer_aniston_salad/" class="md-nav__link">
        The Jennifer Aniston Salad
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../recipes/mango_cinnamon_habanero_hot_sauce/" class="md-nav__link">
        Mango-Cinnamon-Habanero Hot Sauce
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../recipes/mediterranean_chopped_salad/" class="md-nav__link">
        Mediterranean Chopped Salad
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../recipes/roasted_pumpkin_seeds/" class="md-nav__link">
        Roasting Pumpkin Seeds
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../recipes/spicy_pickles/" class="md-nav__link">
        Spicy Pickles for Chilliheads
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../recipes/turkey_meatballs/" class="md-nav__link">
        Turkey Meatballs
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
        <label class="md-nav__link" for="__nav_8" tabindex="0" aria-expanded="false">
          Zzz legacy guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Zzz legacy guides" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Zzz legacy guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../zzz_legacy_guides/" class="md-nav__link">
        Deprecated & Legacy Guides
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../zzz_legacy_guides/fixing_the_audio_system/" class="md-nav__link">
        (Deprecated) System-Wide Loudness Equalization on Pop! OS
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pre-requisites" class="md-nav__link">
    Pre-requisites:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flashing-the-os" class="md-nav__link">
    Flashing the OS
  </a>
  
    <nav class="md-nav" aria-label="Flashing the OS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-settings" class="md-nav__link">
    Basic Settings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hostname" class="md-nav__link">
    Hostname
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh" class="md-nav__link">
    SSH
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-configure-wifi" class="md-nav__link">
    OPTIONAL: Configure WiFi
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#locale" class="md-nav__link">
    Locale
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#persistent-settings" class="md-nav__link">
    Persistent settings
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#first-boot" class="md-nav__link">
    First Boot
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-the-full-sd-card" class="md-nav__link">
    Use the Full SD Card
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optional-raspberry-pi-4-only-use-64bit-kernel" class="md-nav__link">
    OPTIONAL - RASPBERRY PI 4 ONLY: Use 64bit Kernel
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assign-a-static-ip-address" class="md-nav__link">
    Assign a Static IP Address
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-user-credentials" class="md-nav__link">
    Configuring User Credentials
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-ssh" class="md-nav__link">
    Configuring SSH
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  



<h1 id="headless-raspberry-pi-from-scratch">Headless Raspberry Pi from Scratch</h1>
<p>Settings up a raspberry pi for headless networking is pretty
simple, and a great way to experiment with ssh, networking, gnu/linux, and the commandline -- especially for beginners.  This
guide will walk you through first-time system setup.</p>
<h2 id="pre-requisites">Pre-requisites:</h2>
<ul>
<li>A wifi-enabled (or ethernet-port-having) Raspberry Pi board</li>
<li>A power supply for the Raspberry Pi board</li>
<li>A microSD card</li>
<li>microSD card port or dongle for your computer</li>
<li>An internet connection</li>
</ul>
<h2 id="flashing-the-os">Flashing the OS</h2>
<p>We'll be using raspbian, the official OS maintained by the
Raspberry Pi manufacturer.  It is a Debian-linux derivative which
means stability and familiarity for those who have used Debian or
its other popular derivatives (Ubuntu, Pop!, Mint, etc).  </p>
<h3 id="basic-settings">Basic Settings</h3>
<ol>
<li>Download and install the <a href="https://www.raspberrypi.com/software/">Raspberry Pi Imager</a> tool</li>
<li>Plug the microSD card into your computer</li>
<li>Open the Pi Imager</li>
<li>Click "Choose OS" and open Pi OS (other) &gt; Raspberry Pi OS Lite (32-bit)</li>
<li>Click "Choose Storage" and select your microSD card</li>
<li>Press Ctrl + Shift + X to open the Pi imager's secret settings menu</li>
</ol>
<h3 id="hostname">Hostname</h3>
<ol>
<li>
<p>Enable "Set Hostname:" and change it to something you like</p>
<details class="warning" open="open">
<summary>Warning</summary>
<p><em>Hostnames can ONLY use characters a-z, 0-9, and dash "-".
 Any other characters are invalid and may cause problems so
 avoid them!</em></p>
</details>
</li>
</ol>
<h3 id="ssh">SSH</h3>
<ol>
<li>Enable "Enable SSH" and set the radio button to "Use password Authentication"</li>
<li>Set a strong password and keep it somewhere safe -- you'll use this
every time you try to connect to your pi<ul>
<li><em>We'll change this to proper ssh key authorization later.</em></li>
</ul>
</li>
</ol>
<h3 id="optional-configure-wifi">OPTIONAL: Configure WiFi</h3>
<p>If you'll be connecting to your network WiFi and not via ethernet cable:  </p>
<ol>
<li>Enable "Configure wifi"</li>
<li>Type in your network's name into the "SSID" field</li>
<li>Type in your WiFi password into the "Password" field</li>
<li>Select the appropriate entry for your part of the world in the "Wifi country" field</li>
</ol>
<h3 id="locale">Locale</h3>
<ol>
<li>Enable "Set locale settings"</li>
<li>Select the appropriate time zone for your part of the world</li>
<li>Type in the appropriate keyboard layout for your part of the world</li>
</ol>
<h3 id="persistent-settings">Persistent settings</h3>
<ol>
<li>Disable "Enable telemetry".  Yuck.  </li>
</ol>
<p>When all's done click "Save", then "WRITE".  After a short time the
pi OS will be written to the SD card and ready to ship!</p>
<h2 id="first-boot">First Boot</h2>
<p>Safely remove your SD card from your computer and plug it into the
Raspberry Pi.  As soon as you connect the Pi to a power source it will boot up!
Give it ~3-5 minutes to finish the boot process and then head over to your router's dashboard in your browser.
Everyone's router dashboard will look different, but there should be a way to see the name &amp; IP address of
any connected devices.  Look for an entry that matches the hostname you set above.  In some cases
the pi's hostname may be reported as "none".  Just make note of any "suspicious" devices in the list and
their IP addresses.</p>
<ol>
<li>With IP address(es) in hand, open your terminal</li>
<li>SSH to the new system with: <code>ssh pi@&lt;your_hostname&gt;</code> (e.g. <code>ssh pi@raspberrypi</code>)<ul>
<li><em>If you get an error, try using the IP address instead of the hostname, e.g.: <code>ssh pi@192.168.0.40</code></em></li>
</ul>
</li>
<li>Enter the password you set in the Pi Imager's advanced tools section when prompted, then hit return/enter.  </li>
</ol>
<p>You will now be connected to the Pi system's commandline over ssh.  This allows you to control the system remotely without
a keyboard, mouse, or monitored connected up to the system. Slick!  </p>
<h2 id="use-the-full-sd-card">Use the Full SD Card</h2>
<p>By default Raspbian may not "see" the full capacity of the SD card.  This can
be fixed quickly by issuing the following commands over the SSH connection:  </p>
<ol>
<li><code>raspi-config --expand-rootfs</code></li>
<li><code>sudo reboot</code></li>
</ol>
<p>The second command will restart the system, naturally disconnecting your SSH connection.</p>
<h2 id="optional-raspberry-pi-4-only-use-64bit-kernel">OPTIONAL - RASPBERRY PI 4 ONLY: Use 64bit Kernel</h2>
<p>The newer Raspberry Pi 4 boards can run the 64-bit linux kernel. This can provide
some performance improvements over the 32-bit kernel so it's usually worth enabling:  </p>
<ol>
<li>Over an SSH connection, run: <code>sudo nano /boot/config.txt</code></li>
<li>Add the following line to the very end of the file (on a new line):
    <code>arm_64bit=1</code></li>
<li>Press Ctrl + X to enter "save" mode, then "Y" to confirm the edits, then return/enter to commit the changes to disk</li>
<li>Run: <code>sudo reboot</code>  </li>
</ol>
<p>You can then verify whether the system is using the 64bit kernel:  </p>
<ol>
<li>Reconnect over SSH</li>
<li>Run <code>uname -a</code></li>
<li>The output should include <code>aarch64</code>. If you see this then you are on the 64bit kernel </li>
</ol>
<h2 id="assign-a-static-ip-address">Assign a Static IP Address</h2>
<p>The last thing we need is for the Pi's IP address to change on us periodically.  So, we'll set a static IP address to make sure we can always find it:  </p>
<ol>
<li>Make sure you have an active SSH connection to the Pi (see steps above)</li>
<li>Type <code>sudo nano /etc/dhcpcd.conf</code> to open an in-terminal text editor (you'll be prompted for the pi user's password).  Add the following snippet to the very bottom of the file:  </li>
</ol>
<pre><code>interface wlan0 (or use eth0 if your Pi is connected to the router via ethernet cable)
static ip_address=&lt;DESIRED_IP&gt;/24
static routers=&lt;ROUTER_IP&gt;
static domain_name_servers=&lt;ROUTER_IP&gt;
</code></pre>
<p>Explanation:  </p>
<ul>
<li>routers: The IP address of your ROUTER (usually something like 192.168.0.1)</li>
<li>ip_address: The desired network address you want to reach your Pi at.  This should be the same as your Router's IP but with the final number modified, e.g.: 192.168.0.30<ul>
<li><em>Don't exceed a value of 255</em></li>
<li><em>Pick a number that isn't already in use by one of your connected devices</em></li>
</ul>
</li>
<li>domain_name_servers: The IHP address of your ROUTER (again)  </li>
</ul>
<p>Continuing with the edits:  </p>
<ol>
<li>Press Ctrl + X to set nano into "save" mode</li>
<li>Press "Y" then return/enter to write the changes to disk</li>
<li>Lastly enter the command <code>sudo reboot</code> and press return/enter  </li>
</ol>
<p>The Pi system will restart so it can pick up the configuration changes.  Your ssh session will automatically disconnect too.  </p>
<h2 id="configuring-user-credentials">Configuring User Credentials</h2>
<p>Next we'll rename the default user (pi).  The default username is easy for an
attacker to guess, since, well, it's the default for all fresh Raspbian
installations.  Changing it to something else will make it more memorable for us,
and less guessable for any potential threats.  We can't change the pi username
while we're logged into the account, so we will temporarily make use of
the ROOT account:</p>
<ol>
<li>SSH to the Pi</li>
<li>Run <code>sudo passwd</code> to set a root user password (remember it for now but it'll be irrelevant later)</li>
<li>Run <code>sudo nano /etc/ssh/sshd_config</code> to open the ssh config file in nano for editing</li>
<li>
<p>Change this line:  </p>
<p><code>#PermitRootLogin prohibit-password</code>  </p>
<p>TO  </p>
<p><code>PermitRootLogin yes</code>  </p>
<p>(note the missing octothorpe)  </p>
</li>
<li>
<p>Press Ctrl + X, Y, return/enter to save the changes</p>
</li>
<li>Run <code>sudo reboot</code>  </li>
</ol>
<p>Now, we'll connect as the ROOT user instead of the Pi user once the system starts
up again:  </p>
<ul>
<li>Run <code>ssh root@&lt;pi_hostname_or_ip_address&gt;</code> and enter the ROOT password you just set  </li>
</ul>
<p>Change the "pi" username to something new.  This can be any name you want so long
as your remember it:  </p>
<ol>
<li>Run <code>usermod -l &lt;new_user&gt; pi usermod -m -d /home/&lt;new_user&gt; &lt;new_user&gt;</code><ul>
<li>Example: <code>usermod -l larry pi usermod -m -d /home/larry larry</code></li>
</ul>
</li>
<li>Drop the SSH connection with Ctrl + D</li>
<li>Reconnect the SSH session using the new username (same password as the old pi user): <code>&lt;new_user&gt;@&lt;pi_hostname_or_ip_address&gt;</code></li>
<li>Run <code>sudo passwd -l root</code> to disable the root user entirely (for security)</li>
<li>Run <code>sudo nano /etc/ssh/sshd_config</code></li>
<li>
<p>Undo the changes you made earlier:  </p>
<p><code>PermitRootLogin yes</code>  </p>
<p>BACK TO  </p>
<p><code>#PermitRootLogin prohibit-password</code>  </p>
<p>(note the return of octothorpe)  </p>
</li>
<li>
<p>Drop the SSH connection with Ctrl + D  </p>
</li>
</ol>
<p>Now you have a new username and the ROOT account is protected.  </p>
<h2 id="configuring-ssh">Configuring SSH</h2>
<p>Next we'll work on strengthening our ssh connection.  This is especially
important if the Pi will be exposed to the public internet.  Otherwise,
in addition to being more secure, ssh key pairs are also more convenient
to use since they (can) safely work passwordless.  </p>
<p>On the host machine create a new key/pair with the ssh-keygen tool.  If you're on
linux already this should be installed by default.  If not, you may need to look up
a guide for your operating system:  </p>
<ol>
<li>Create a new pair with <code>ssh-keygen -t ed25519</code> and follow the terminal prompts<ul>
<li><em>Give the key a useful name, like myserver_rsa</em></li>
<li><em>You CAN add a password if you'd like. This is a good idea if the server will be accessible from the public internet. If it will only be accessible to your local network you can forego the password option</em></li>
<li><em>This command will create two files: myserver_rsa and myserver_rsa.pub.</em>
<em>Never ever ever share the myserver_rsa file.  This is your private key.</em>
<em>Think of it like a password -- you don't want anyone to know it.  The .pub file on the other hand you can share around wherever you like!</em></li>
</ul>
</li>
<li>Install the new PUBLIC key on the server: <code>ssh-copy-id -i /path/to/myserver_rsa.pub &lt;pi_username&gt;@&lt;pi_hostname_or_ip_address&gt;</code></li>
<li>SSH to the Pi -- it should happen without a password prompt (unless you added a password to the SSH key itself)  </li>
</ol>
<p>With our key/pair set up we can disable ssh connections via plain-old password
authentication for even better security:  </p>
<ol>
<li>Over an SSH connection, run <code>sudo nano /etc/ssh/sshd_config</code> to edit the Pi's ssh config again</li>
<li>
<p>Change the following:  </p>
<p><code>#PasswordAuthentication yes</code>  </p>
<p>TO  </p>
<p><code>PasswordAuthentication no</code>  </p>
<p>(note the missing octothorpe)  </p>
</li>
<li>
<p>Press Ctrl + X, Y, return/enter to save the changes</p>
</li>
<li>Run: <code>sudo reboot</code>  </li>
</ol>
<p>And that is pretty much it!  From here you may want to explore other security
software, such as a firewall (UFW) and an intrusion detector/logger (Fail2Ban),
especially if this Pi will be serving applications that are accessible from the public internet.  Other good choices include wireguard, which will set up a VPN
that you can use to access your network on the go, or NGINX which could be used
as a simple webserver or reverse proxy.  </p>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      2022-12-30
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      2021 &copy; Kmagameguy - Licensed under GPLv3
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.sections", "search.suggest", "search.highlight", "search.share"], "search": "../../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.51d95adb.min.js"></script>
      
    
  </body>
</html>